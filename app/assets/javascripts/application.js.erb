//= require jquery
//= require jquery_ujs
//= require semantic-ui
//= require turbolinks
//= require simditor
//= require_tree .

$(document).on("ready page:load", function() {
  // Semantic-UI
  // Initialize sidebar module
  $('.sidebar-toggle').click(function(){
    $('.sidebar').sidebar('toggle');
  })
  // Initialize dropdown module
  $('.dropdown').dropdown();
  // Initialize dismissable message collection
  $('.message .close').on('click', function() {
    $(this).closest('.message').fadeOut();
  });

  // replace rails default error tags with semantic-ui error classes
  var error_fields = $('.field_with_errors');
  error_fields.parent('.field').addClass("error");
  error_fields.children().unwrap();

  // Initialize Simditor
  var textarea = $('.editor');
  if(textarea.length > 0) {
    var editor = new Simditor({
      textarea: textarea,
      toolbar: ['title', 'bold', 'italic', 'underline', 'strikethrough', 'color',
                '|', 'ol', 'ul', 'blockquote', 'code', 'table', 'link', 'image', 'hr',
                '|', 'indent', 'outdent',
                '|', 'source'],
      pasteImage: true,
      defaultImage: '<%= image_path('upload-loading.png') %>',
      upload: {
        url: '/upload'
      }
    });
  }

});
